function jsTypeAheadFn(t,e){this.text__string={en:{suggest:"Suggested for you"},tc:{suggest:"對你的建議"},sc:{suggest:"对你的建议"}},this.elms={container:null,input:null},this.status={isJump:!1,isQuery:!1,isSuggestion:!1},this.bloodhound=null,this.wildcard="%QUERY",this.elms.container=t,this.elms.input=this.elms.container.find(".js-typeahead-input"),this.status.isJump=this.elms.container.hasClass("js-typeahead-jump"),this.init()}jsTypeAheadFn.prototype={init:function(){var r=this,t={datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:r.elms.container.attr("data-searchurl")+"?q=%QUERY&s="+r.elms.container.attr("data-website"),wildcard:"%QUERY",transform:function(t){var e=""!==t?JSON.parse(t):{},n=e.keywords||[],s=e.related_suggestions||[],i=[],o=[],a=[];return 0<s.length?($.each(s,function(t,e){o.push({type:"related_suggestions",name:e.name,href:e.href,ext:!!e.ext&&e.ext})}),r.status.isSuggestion=!0):r.status.isSuggestion=!1,0<n.length&&$.each(n,function(t,e){return i.push({keyword:e})}),a=a.concat(o,i)}}},e={},e=$.extend({},t,e);r.bloodhound=new Bloodhound(e);var n={},n=$.extend({},{highlight:!0,maxItem:!1,minLength:2,autoSelect:!1},n);r.elms.input.typeahead(n,{source:r.bloodhound,limit:20,display:r.displayFn,templates:r.templateFn()}).on("typeahead:selected",function(t,e){var n;void 0!==e.name?(n=e.href,"true"==e.ext?window.open(n,"_blank").focus():window.location.href=n):$(t.target.form).trigger("submit")}),r.elms.input.prev().attr("title",$('label[for="'+r.elms.input.attr("id")+'"]').text()),$(document).on("click",".tt-suggestion-link",function(t){t.preventDefault()})}},jsTypeAheadFn.prototype.displayFn=function(t){return void 0!==t.type?t.name:t.keyword},jsTypeAheadFn.prototype.templateFn=function(){var e=this;return{suggestion:e.suggestionFn,header:function(t){return!!e.status.isSuggestion&&'<p class="tt-header">'+e.text__string[getLang()].suggest+"</p>"}}},jsTypeAheadFn.prototype.suggestionFn=function(t){var e="tt-suggestion",n="related_suggestions"==t.type?(e+=" tt-suggestion-jump",'<a on href="'+t.href+'" class="tt-suggestion-link theme-color-text-dark">'+t.name+"</a>"):(e+=" tt-suggestion-keyword",t.keyword);return'<div class="'+e+'">'+n+"</div>"};var jsTypeAhead={init:function(){var t=$(".js-typeahead");t.length&&t.each(function(){var t=$(this),e=new jsTypeAheadFn(t);t[0].typeahead=e})}};