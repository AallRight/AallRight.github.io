var jsCoCard=function(){var m={showItems:{xxl:4,xl:4,lg:4,md:3,sm:3,xs:1},scaleStep:.87,bezier:BezierEasing(.7,.8,.9,1),initialSlide:0};function f(a){var n=m.showItems[jsQueryTest.getCurrentState()];return a<n?a:n}function x(a){return a.find(".co-card")}function v(a,n){return a.filter('[data-co-index="'+n+'"]')}function h(a,n,t){return a==n?0:a==-t?n-t:a}function p(a){var e=a.data("currentSlideIdx"),d=a.data("showItem"),n=x(a),s=a.width(),r=0;n.each(function(a){var n,t,i=$(this);i.attr("aria-hidden","true"),i.data("co-index")>=e&&i.data("co-index")<e+d?(n=0==r?1:Math.pow(m.scaleStep,r),(t=0)==r?i.addClass("main").attr("aria-hidden","false"):i.removeClass("main"),0<r&&(t=m.bezier(r/d)*s),i.addClass("active").css({"z-index":d-r,transition:"all 0.4s ease-in-out",transform:"scale("+n+") translate(-"+t+"px, 0)"}),r++):i.data("co-index")-e==-1||i.data("co-index")-e==1?i.removeClass("main active").css({"z-index":d,transition:"all 0.4s ease-in-out",transform:"scale(0.3) translate(0, 0)"}):i.removeClass("main active").css({"z-index":0,transform:"scale(0.3) translate(0, 0)"})})}function C(a){var e=a.data("currentSlideIdx"),d=a.data("showItem"),n=(a.data("itemLength"),x(a)),s=(v(n,e),a.width()),r=0;n.each(function(a){var n,t,i=$(this);i.attr("aria-hidden","true"),i.data("co-index")>=e&&i.data("co-index")<e+d&&(n=0==r?1:Math.pow(m.scaleStep,r),(t=0)<r&&(t=m.bezier(r/d)*s),0==r?i.addClass("main").attr("aria-hidden","false"):i.removeClass("main"),i.addClass("active").css({"z-index":d-r+1,transition:"none",transform:"scale("+n+") translate(-"+t+"px, 0)"}),r++)}),r=0,n.each(function(a){var n=$(this);(n.data("co-index")<e||n.data("co-index")>=e+d)&&n.css({"z-index":0,transition:"none",transform:"scale(0.3) translate(0, 0)"}).removeClass("main active")}),n.each(function(){var a=$(this);a.data("co-index")>=e&&a.data("co-index")<e+d?(a.css({"z-index":d-r}),r++):a.data("co-index")-e==-1&&a.removeClass("main active").css({"z-index":d})})}return{init:function(){var a=$(".co-card-slider");a.length&&a.each(function(){var a,n,t,i,e,d=$(this),s=d.find(".co-overlay-slider"),r=d.find(".co-card"),o=r.length,c=d.find(".co-card-slider__col-list"),l=f(o),u=m.initialSlide;c.data("currentSlideIdx",u),c.data("showItem",l),c.data("itemLength",o),n=s,(t=r).clone().prependTo(n),t.clone().appendTo(n),a=x(s),i=o,e=0,a.each(function(a){var n=$(this);n.attr("data-co-index",a-i),n.attr("data-co-ori-index",e),++e==i&&(e=0)}),p(s),function(l,u){var a=l.data("itemLength"),m=$('<button class="co-overlay-slider__prev" data-dir="prev"><span class="sr-only">'+langArg({en:"Previous",tc:"上一頁",sc:"上一页"})+"</span></button>"),f=$('<button class="co-overlay-slider__next" data-dir="next"><span class="sr-only">'+langArg({en:"Next",tc:"下一頁",sc:"下一页"})+"</span></button>");1<a&&l.append(m,f);f.on("click",function(a){a.preventDefault(),m.add(f).addClass("is-animating");var n,t=l.data("currentSlideIdx"),i=t+1,e=l.data("showItem"),d=l.data("itemLength"),s=l.data("co-navfor"),r=x(l),o=v(r,t),c=h(t,d,e);c!=t&&(l.data("currentSlideIdx",c),C(u),i=c+1),l.data("currentSlideIdx",i),p(u),o.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){m.add(f).removeClass("is-animating"),m.add(f).addClass("animate-end")}),"undefined"!=s&&(n=v(r,i).data("co-ori-index"),$("#"+s).slick("slickGoTo",n))}),m.on("click",function(a){a.preventDefault(),m.add(f).removeClass("animate-end"),m.add(f).addClass("is-animating");var n,t=l.data("currentSlideIdx"),i=t-1,e=l.data("showItem"),d=l.data("itemLength"),s=l.data("co-navfor"),r=x(l),o=v(r,t),c=h(t,d,e);c!=t&&(l.data("currentSlideIdx",c),C(u),i=c-1),l.data("currentSlideIdx",i),p(u),o.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){m.add(f).removeClass("is-animating"),m.add(f).addClass("animate-end")}),"undefined"!=s&&(n=v(r,i).data("co-ori-index"),$("#"+s).slick("slickGoTo",n))})}(c,s),$(window).on("resize",function(){l=f(),c.data("showItem",l),C(s)})})}}}();