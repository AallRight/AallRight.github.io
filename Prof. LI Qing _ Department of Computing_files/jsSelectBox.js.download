var jsSelectBox=function(){var s,i={buttonClass:"",buttonContainer:"<div></div>",numberDisplayed:1,templates:{ul:'<ul class="multiselect-container dropdown-menu"></ul>',li:'<li class="multiselect-option rc__itm"><a href="javascript:void(0);"><label></label></a></li>'}};function o(e){e.next().find(".multiselect-container").find(".multiselect-option").each(function(){var e=$(this).find("label"),t=e.text();e.find("input").addClass("rc--"+e.find("input").attr("type")),e[0].removeChild(e[0].childNodes[1]),e.append("<span>"+t+"</span>")})}function c(e,t,s){var l;e.closest(".js-selectBox").hasClass("js-selectBox-jump")&&!s&&(""!==e.val()?(window.location.href=e.val(),e.parent().find(".multiselect-selected-text").addClass("multiselect-selected-text--orange")):e.parent().find(".multiselect-selected-text").removeClass("multiselect-selected-text--orange")),0==e[0].selectedIndex?e.closest(".js-selectBox").addClass("js-selectBox-default"):e.closest(".js-selectBox").removeClass("js-selectBox-default"),!s&&e.closest(".toolbar-sorter").length&&e.trigger("click"),"undefined"!=typeof jsBsTabNav&&e.closest(".js-selectBox").hasClass("js-selectBox-tabselect")&&jsBsTabNav.tabJumpTo(e,e[0].selectedIndex,s),e.closest(".js-selectBox").hasClass("js-targetVisibile")&&((l=e.find("option").eq(e[0].selectedIndex).data("js-target-visible-target"))?jsTargetVisible.showWithTargetString([l]):(e.find("option").filter("[data-js-target-visible-target]").map(function(){return $(this).data("js-target-visible-target")}),jsTargetVisible.hideWithTargetString(e.find("option").filter("[data-js-target-visible-target]").map(function(){return $(this).data("js-target-visible-target")})))),e.closest(".js-selectBox").hasClass("js-selectBox-form-submit")&&!s&&e.closest("form").submit(),setTimeout(function(){},80)}return{init:function(e){var t=void 0!==e?e:$("body");(s=$('.js-selectBox select:not(".select-default")',t)).length&&(s.each(function(){var e,l=$(this),s=l.parent(),t=l.prop("multiple"),n=s.hasClass("js-selectBox-left-right"),a=null;a=$.extend({},i,{}),void 0!==s.data("color")&&(e=s.data("color"),a=$.extend({},a,{buttonClass:" js-selectBox-color-"+e})),t&&(a=$.extend({},a,{buttonText:function(e,t){if(0===e.length)return $(t).prop("title");if(e.length<=i.numberDisplayed){var s=[];return e.each(function(){s.push($(this).text())}),s.join(", ")}return langArg({en:e.length+" selected",tc:"已選"+e.length+"個",sc:"已选"+e.length+"个"})}})),n&&function(i,e){if(i.prop("multiple"))return;var t=$('<button class="js-selectBox-left-right-arrow js-selectBox-left-right-arrow--prev" data-type="prev"><span class="sr-only">'+langArg({en:"Prev",tc:"ä¸Šä¸€å€‹",sc:"ä¸Šä¸€ä¸ª"})+"</span></button>"),s=$('<button class="js-selectBox-left-right-arrow js-selectBox-left-right-arrow--next" data-type="next"><span class="sr-only">'+langArg({en:"Next",tc:"ä¸‹ä¸€å€‹",sc:"ä¸‹ä¸€ä¸ª"})+"</span></button>");e.append(t,s),t.add(s).on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),s=i,l=t.data("type"),n=s.find("option:selected"),a="next"==l?n.nextOrFirst():n.prevOrLast();a.prop("selected",!0),i.multiselect("refresh"),i.trigger("change")})}(l,s),a=$.extend({},a,{onInitialized:function(e,t){0==$(e).prop("multiple")&&s.addClass("js-selectBox-single"),s.hasClass("js-selectBox--sm")&&s.find("button").addClass("multiselect--sm"),o($(e)),c($(e),0,!0)},onDropdownShow:function(e){s.addClass("js-select-active"),isIE8&&(s.addClass("waitBefore"),setTimeout(function(){s.removeClass("waitBefore")},100))},onDropdownHide:function(e){s.removeClass("js-select-active"),isIE8&&(s.addClass("waitBefore"),setTimeout(function(){s.removeClass("waitBefore")},100))},onChange:function(e,t,s){c(l)}}),l.data("selectmenu",l.multiselect(a)),l.attr("tabindex",-1),function s(e){var l=e,t=l.closest(".js-selectBox");t.hasClass("js-selectBox-single")&&t.find(".multiselect-option.rc__itm label").on("click",function(e){var t=$(this).closest(".rc__itm");t.hasClass("active")&&(l.multiselect("rebuild"),o(l),s(l))})}(l)}),$(document).on("focus blur",".multiselect.dropdown-toggle",function(e){$(this).closest(".js-selectBox").toggleClass("js-selectBox-focus","focusin"==e.type)}))},renderEnable:function(e,t){var s=e,l=s.next(".ui-selectmenu-button").length,n=s.next().find(".multiselect").length;s.prop("disabled",!t),l&&s.selectmenu("refresh"),n&&s.multiselect(t?"enable":"disable"),t?s.closest(".js-selectBox").removeClass("js-selectBox-disable"):s.closest(".js-selectBox").addClass("js-selectBox-disable")},reBuild:function(e){var t=e;t.next(".ui-selectmenu-button").length,t.next().find(".multiselect").length&&(t.multiselect("rebuild"),o(t))}}}();